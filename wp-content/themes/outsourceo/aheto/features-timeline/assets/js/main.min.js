"use strict";!function(){function e(e){this.element=e,this.datesContainer=this.element.getElementsByClassName("outsourceo-timeline__dates")[0],this.line=this.datesContainer.getElementsByClassName("outsourceo-timeline__line")[0],this.fillingLine=this.datesContainer.getElementsByClassName("outsourceo-timeline__filling-line")[0],this.date=this.line.getElementsByClassName("outsourceo-timeline__date"),this.selectedDate=this.line.getElementsByClassName("outsourceo-timeline__date--selected")[0],this.dateValues=function(e){for(var t=[],n=0;n<e.date.length;n++){var i=e.date[n].getAttribute("data-date").split("T");if(1<i.length)var a=i[0].split("/"),s=i[1].split(":");else if(0<=i[0].indexOf(":"))a=["2000","0","0"],s=i[0].split(":");else a=i[0].split("/"),s=["0","0"];var o=new Date(a[2],a[1]-1,a[0],s[0],s[1]);t.push(o)}return t}(this),this.minLapse=function(e){for(var t=[],n=1;n<e.dateValues.length;n++){var i=r(e.dateValues[n-1],e.dateValues[n]);0<i&&t.push(i)}return 0<t.length?Math.min.apply(null,t):864e5}(this),this.navigation=this.element.getElementsByClassName("outsourceo-timeline__navigation"),this.contentWrapper=this.element.getElementsByClassName("outsourceo-timeline__events")[0],this.content=this.contentWrapper.getElementsByClassName("outsourceo-timeline__event"),this.eventsMinDistance=60,this.eventsMaxDistance=200,this.translate=0,this.lineLength=0,this.oldDateIndex=Util.getIndexInArray(this.date,this.selectedDate),this.newDateIndex=this.oldDateIndex,function(e){for(var t=0,n=0;n<e.dateValues.length;n++){var i=0==n?0:n-1,a=r(e.dateValues[i],e.dateValues[n]),s=(Math.round(a/e.minLapse)+2)*e.eventsMinDistance;s<e.eventsMinDistance?s=e.eventsMinDistance:s>e.eventsMaxDistance&&(s=e.eventsMaxDistance),t+=s,e.date[n].setAttribute("style","left:"+t+"px")}e.line.style.width=t+e.eventsMinDistance+"px",e.lineLength=t+e.eventsMinDistance,Util.addClass(e.element,"outsourceo-timeline--loaded"),o(e,e.selectedDate),l(e,"next")}(this),function(e){var n=e;n.navigation[0].addEventListener("click",function(e){e.preventDefault(),s(n,"prev")}),n.navigation[1].addEventListener("click",function(e){e.preventDefault(),s(n,"next")}),new SwipeContent(n.datesContainer),n.datesContainer.addEventListener("swipeLeft",function(e){s(n,"next")}),n.datesContainer.addEventListener("swipeRight",function(e){s(n,"prev")});for(var t=0;t<n.date.length;t++)!function(t){n.date[t].addEventListener("click",function(e){e.preventDefault(),o(n,e.target)}),n.content[t].addEventListener("animationend",function(e){t==n.newDateIndex&&n.newDateIndex!=n.oldDateIndex&&i(n)})}(t)}(this)}function s(e,t){var n=e.datesContainer.offsetWidth;t&&(e.translate="next"==t?e.translate-n+e.eventsMinDistance:e.translate+n-e.eventsMinDistance),0-e.translate>e.lineLength-n&&(e.translate=n-e.lineLength),0<e.translate&&(e.translate=0),e.line.style.transform="translateX("+e.translate+"px)",0==e.translate?Util.addClass(e.navigation[0],"outsourceo-timeline__navigation--inactive"):Util.removeClass(e.navigation[0],"outsourceo-timeline__navigation--inactive"),e.translate==n-e.lineLength?Util.addClass(e.navigation[1],"outsourceo-timeline__navigation--inactive"):Util.removeClass(e.navigation[1],"outsourceo-timeline__navigation--inactive")}function o(e,t){e.newDateIndex=Util.getIndexInArray(e.date,t),e.oldDateIndex=Util.getIndexInArray(e.date,e.selectedDate),Util.removeClass(e.selectedDate,"outsourceo-timeline__date--selected"),Util.addClass(e.date[e.newDateIndex],"outsourceo-timeline__date--selected"),e.selectedDate=e.date[e.newDateIndex],function(e){for(var t=0;t<e.date.length;t++)t<e.newDateIndex?Util.addClass(e.date[t],"outsourceo-timeline__date--older-event"):Util.removeClass(e.date[t],"outsourceo-timeline__date--older-event")}(e),function(e){if(e.newDateIndex>e.oldDateIndex)var t="outsourceo-timeline__event--selected outsourceo-timeline__event--enter-right",n="outsourceo-timeline__event--leave-left";else if(e.newDateIndex<e.oldDateIndex)t="outsourceo-timeline__event--selected outsourceo-timeline__event--enter-left",n="outsourceo-timeline__event--leave-right";else t="outsourceo-timeline__event--selected",n="";Util.addClass(e.content[e.newDateIndex],t),e.newDateIndex!=e.oldDateIndex&&(Util.removeClass(e.content[e.oldDateIndex],"outsourceo-timeline__event--selected"),Util.addClass(e.content[e.oldDateIndex],n),e.contentWrapper.style.height=e.content[e.newDateIndex].offsetHeight+"px")}(e),function(e){var t=window.getComputedStyle(e.selectedDate,null),n=t.getPropertyValue("left"),i=t.getPropertyValue("width");n=Number(n.replace("px",""))+Number(i.replace("px",""))/2,e.fillingLine.style.transform="scaleX("+n/e.lineLength+")"}(e)}function i(e){e.contentWrapper.style.height=null,Util.removeClass(e.content[e.newDateIndex],"outsourceo-timeline__event--enter-right outsourceo-timeline__event--enter-left"),Util.removeClass(e.content[e.oldDateIndex],"outsourceo-timeline__event--leave-right outsourceo-timeline__event--leave-left")}function l(e,t){var n=window.getComputedStyle(e.selectedDate,null),i=Number(n.getPropertyValue("left").replace("px","")),a=e.datesContainer.offsetWidth;("next"==t&&i>=a-e.translate||"prev"==t&&i<=-e.translate)&&(e.translate=a/2-i,s(e,!1))}function r(e,t){return Math.round(t-e)}window.HorizontalTimeline=e;var d=document.getElementsByClassName("js-outsourceo-timeline"),u=[];if(0<d.length){for(var t=0;t<d.length;t++)u.push(new e(d[t]));document.addEventListener("keydown",function(e){e.keyCode&&39==e.keyCode||e.key&&"arrowright"==e.key.toLowerCase()?n("next"):(e.keyCode&&37==e.keyCode||e.key&&"arrowleft"==e.key.toLowerCase())&&n("prev")})}function n(e){for(var t=0;t<u.length;t++)c(d[t])&&(n=u[t],void 0,(a="next"==(i=e)?n.newDateIndex+1:n.newDateIndex-1)<0||a>=n.date.length||(o(n,n.date[a]),l(n,i)));var n,i,a}function c(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,a=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+a>window.pageYOffset&&n+i>window.pageXOffset}}();
