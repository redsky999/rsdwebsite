{"version":3,"sources":["aheto/features-timeline/assets/js/swipe-content.js"],"names":["SwipeContent","element","this","dragging","intervalId","content","addEventListener","handleEvent","bind","initSwipeContent","removeEventListener","drag","event","initDragging","delta","parseInt","unify","clientX","clientY","endDrag","window","requestAnimationFrame","y","emitSwipeEvents","emitDrag","Math","cancelAnimationFrame","clearInterval","cancelDragging","dx","dy","startDrag","sign","s","abs","changedTouches","eventName","detail","x","dispatchEvent","swipe","document","getElementsByClassName","length","i"],"mappings":"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","file":"swipe-content.min.js","sourcesContent":["(function() {\n\t// Swipe Content Plugin - by CodyHouse.co\n\t// https://codyhouse.co/ds/components/info/swipe-content\n\tvar SwipeContent = function(element) {\n\t\tthis.element = element;\n\t\tthis.delta = [false, false];\n\t\tthis.dragging = false;\n\t\tthis.intervalId = false;\n\t\tinitSwipeContent(this);\n\t};\n\n\tfunction initSwipeContent(content) {\n\t\tcontent.element.addEventListener('mousedown', handleEvent.bind(content));\n\t\tcontent.element.addEventListener('touchstart', handleEvent.bind(content));\n\t};\n\n\tfunction initDragging(content) {\n\t\t//add event listeners\n\t\tcontent.element.addEventListener('mousemove', handleEvent.bind(content));\n\t\tcontent.element.addEventListener('touchmove', handleEvent.bind(content));\n\t\tcontent.element.addEventListener('mouseup', handleEvent.bind(content));\n\t\tcontent.element.addEventListener('mouseleave', handleEvent.bind(content));\n\t\tcontent.element.addEventListener('touchend', handleEvent.bind(content));\n\t};\n\n\tfunction cancelDragging(content) {\n\t\t//remove event listeners\n\t\tif(content.intervalId) {\n\t\t\t(!window.requestAnimationFrame) ? clearInterval(content.intervalId) : window.cancelAnimationFrame(content.intervalId);\n\t\t\tcontent.intervalId = false;\n\t\t}\n\t\tcontent.element.removeEventListener('mousemove', handleEvent.bind(content));\n\t\tcontent.element.removeEventListener('touchmove', handleEvent.bind(content));\n\t\tcontent.element.removeEventListener('mouseup', handleEvent.bind(content));\n\t\tcontent.element.removeEventListener('mouseleave', handleEvent.bind(content));\n\t\tcontent.element.removeEventListener('touchend', handleEvent.bind(content));\n\t};\n\n\tfunction handleEvent(event) {\n\t\tswitch(event.type) {\n\t\t\tcase 'mousedown':\n\t\t\tcase 'touchstart':\n\t\t\t\tstartDrag(this, event);\n\t\t\t\tbreak;\n\t\t\tcase 'mousemove':\n\t\t\tcase 'touchmove':\n\t\t\t\tdrag(this, event);\n\t\t\t\tbreak;\n\t\t\tcase 'mouseup':\n\t\t\tcase 'mouseleave':\n\t\t\tcase 'touchend':\n\t\t\t\tendDrag(this, event);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tfunction startDrag(content, event) {\n\t\tcontent.dragging = true;\n\t\t// listen to drag movements\n\t\tinitDragging(content);\n\t\tcontent.delta = [parseInt(unify(event).clientX), parseInt(unify(event).clientY)];\n\t\t// emit drag start event\n\t\temitSwipeEvents(content, 'dragStart', content.delta);\n\t};\n\n\tfunction endDrag(content, event) {\n\t\tcancelDragging(content);\n\t\t// credits: https://css-tricks.com/simple-swipe-with-vanilla-javascript/\n\t\tvar dx = parseInt(unify(event).clientX), \n\t    dy = parseInt(unify(event).clientY);\n\t  \n\t  // check if there was a left/right swipe\n\t\tif(content.delta && (content.delta[0] || content.delta[0] === 0)) {\n\t    var s = Math.sign(dx - content.delta[0]);\n\t\t\t\n\t\t\tif(Math.abs(dx - content.delta[0]) > 30) {\n\t\t\t\t(s < 0) ? emitSwipeEvents(content, 'swipeLeft', [dx, dy]) : emitSwipeEvents(content, 'swipeRight', [dx, dy]);\t\n\t\t\t}\n\t    \n\t    content.delta[0] = false;\n\t  }\n\t\t// check if there was a top/bottom swipe\n\t  if(content.delta && (content.delta[1] || content.delta[1] === 0)) {\n\t  \tvar y = Math.sign(dy - content.delta[1]);\n\n\t  \tif(Math.abs(dy - content.delta[1]) > 30) {\n\t    \t(y < 0) ? emitSwipeEvents(content, 'swipeUp', [dx, dy]) : emitSwipeEvents(content, 'swipeDown', [dx, dy]);\n\t    }\n\n\t    content.delta[1] = false;\n\t  }\n\t\t// emit drag end event\n\t  emitSwipeEvents(content, 'dragEnd', [dx, dy]);\n\t  content.dragging = false;\n\t};\n\n\tfunction drag(content, event) {\n\t\tif(!content.dragging) return;\n\t\t// emit dragging event with coordinates\n\t\t(!window.requestAnimationFrame) \n\t\t\t? content.intervalId = setTimeout(function(){emitDrag.bind(content, event);}, 250) \n\t\t\t: content.intervalId = window.requestAnimationFrame(emitDrag.bind(content, event));\n\t};\n\n\tfunction emitDrag(event) {\n\t\temitSwipeEvents(this, 'dragging', [parseInt(unify(event).clientX), parseInt(unify(event).clientY)]);\n\t};\n\n\tfunction unify(event) { \n\t\t// unify mouse and touch events\n\t\treturn event.changedTouches ? event.changedTouches[0] : event; \n\t};\n\n\tfunction emitSwipeEvents(content, eventName, detail) {\n\t\t// emit event with coordinates\n\t\tvar event = new CustomEvent(eventName, {detail: {x: detail[0], y: detail[1]}});\n\t\tcontent.element.dispatchEvent(event);\n\t};\n\n\twindow.SwipeContent = SwipeContent;\n\t\n\t//initialize the SwipeContent objects\n\tvar swipe = document.getElementsByClassName('js-swipe-content');\n\tif( swipe.length > 0 ) {\n\t\tfor( var i = 0; i < swipe.length; i++) {\n\t\t\t(function(i){new SwipeContent(swipe[i]);})(i);\n\t\t}\n\t}\n}());"]}